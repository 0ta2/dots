#!/bin/bash

set -eu

# Brewfileã®hashå€¤ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ã€Brewfileã®å¤‰æ›´æ™‚ã®ã¿æœ¬ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
# Brewfile hash: {{ include "Brewfile" | sha256sum }}

{{ if eq .chezmoi.username "0ta2" }}
BREWFILE={{ joinPath .chezmoi.sourceDir "Brewfile" | quote }}
{{ else }}
BREWFILE=${HOME}/.Brewfile
{{ end }}

if [[ -f "$BREWFILE" ]]; then
    echo "ğŸº Brewfile has changed, running brew bundle..."
    brew bundle --cleanup --file="$BREWFILE"
else
    echo "ğŸŒ€ No Brewfile found, skipping brew bundle"
fi
